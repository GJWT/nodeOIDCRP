<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: RPHandler</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: RPHandler</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>RPHandler<span class="signature">(baseUrl, hasSeed, keyJar, verifySsl, services, serviceFactory, clientConfigs, clientAuthnMethod, clientCls)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="RPHandler"><span class="type-signature"></span>new RPHandler<span class="signature">(baseUrl, hasSeed, keyJar, verifySsl, services, serviceFactory, clientConfigs, clientAuthnMethod, clientCls)</span><span class="type-signature"></span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>baseUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">There are several places in the code where urls are dynamically built. What normally happens when creating this new url, is that a path is added to baseUrl.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>hasSeed</code></td>
            

            <td class="type">
            
                
<span class="param-type">int</span>


            
            </td>

            

            

            <td class="description last">Used when dynamically creating redirect_uris. Just to make it imposible for outsiders to guess what redirect_uris would be created for which OPs/ASs. Look at create_callbacks()</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>keyJar</code></td>
            

            <td class="type">
            
                
<span class="param-type">KeyJar</span>


            
            </td>

            

            

            <td class="description last">A keyjar instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>verifySsl</code></td>
            

            <td class="type">
            
                
<span class="param-type">bool</span>


            
            </td>

            

            

            <td class="description last">Whether the SSL certificate should be verified</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>services</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">A list of service definitions</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>serviceFactory</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">A factory to use when building the service instances</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>clientConfigs</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object.&lt;string, string></span>


            
            </td>

            

            

            <td class="description last">Configuration information passed on to the Service context initialization</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>clientAuthnMethod</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Methods that this client can use to authenticate itself. Its a dictionary with method names as keys and method classes as values.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>clientCls</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">Certificates used by the HTTP client</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line107">line 107</a>
    </li></ul></dd>
    

    

    

    
</dl>


















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="begin"><span class="type-signature"></span>begin<span class="signature">(issuer, userId)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This is the first of the three high level mthods that most users of this library should
confine themselves to use. If will use client_setup to product a Client instance ready
to be used against the OP/AS the user wants to use. Once it has the client it will 
construct an Authorization Request.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Issuer ID</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>userId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">A user identifier</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line546">line 546</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A dictionary containing url the URL that will redirect the user to 
the OP/AS and state key, thes session key will allow higher level code to access
session information.
</div>



    





        
            

    

    
    <h4 class="name" id="createCallbacks"><span class="type-signature"></span>createCallbacks<span class="signature">(issuer)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    To mitigate some security issues the redirect_uris should be OP/AS specific. 
This method creates a set of redirect_uris unique to the OP/AS.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Issuer ID</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line247">line 247</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A set of redirect_uris
</div>



    





        
            

    

    
    <h4 class="name" id="doClientInfo"><span class="type-signature"></span>doClientInfo<span class="signature">(client, issuer)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Prepare for and do client registration if configured to do or so 
by calling loadRegistration and checks for redirectUris
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            

            <td class="description last">Client instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The issuer ID</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line493">line 493</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="doProviderInfo"><span class="type-signature"></span>doProviderInfo<span class="signature">(client, issuer)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Either get the provider info from configuration or from dynamic 
discovery by calling loadProviderInfo and updates endpoint
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            

            <td class="description last">OIC client instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line446">line 446</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Issuer
</div>



    





        
            

    

    
    <h4 class="name" id="dynamicProviderInfoDiscovery"><span class="type-signature"></span>dynamicProviderInfoDiscovery<span class="signature">(client)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This is about performing dynamic Provider Info discovery
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            

            <td class="description last">Client instance</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line413">line 413</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="finalize"><span class="type-signature"></span>finalize<span class="signature">(issuer, response)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    The third of the high level methods that a user of this class should know about.
Once the consumer has redirected the user back to the callback url there might be a number
of services that hte client should use. Which one those are defined by the client configuration.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Who sent the response</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>response</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object.&lt;string, string></span>


            
            </td>

            

            

            <td class="description last">A dictionary with two claims: 
     stateKey - the key under which the session information is stored in the data store and 
     error - encountered error or 
     userinfo - the collected user information</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line746">line 746</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="finalizeAuth"><span class="type-signature"></span>finalizeAuth<span class="signature">(client, issuer, response)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Given the response returned to the redirect_uri, parse and verify it.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            

            <td class="description last">A client instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">An issuer ID</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>response</code></td>
            

            <td class="type">
            
                
<span class="param-type">AuthorizationResponse</span>


            
            </td>

            

            

            <td class="description last">The authorization response as a dictionary</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line296">line 296</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    An auth2 or OIC authorizationResponse instance
</div>



    





        
            

    

    
    <h4 class="name" id="getAccessAndIdToken"><span class="type-signature"></span>getAccessAndIdToken<span class="signature">(authorizationResponse, stateKey, client)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    There are a number of services where access tokens and ID Tokens can occur in the response. 
This method goes through the possiblee places based on the response type the client uses.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>authorizationResponse</code></td>
            

            <td class="type">
            
                
<span class="param-type">AuthorizationResponse</span>


            
            </td>

            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last">The authorization response</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stateKey</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The state key (the state parameter in the authorization request)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last">Client instance</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line675">line 675</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A dictionary with 2 keys: access token with the access token as value and id token 
with a verified id token if one was returned otherwise none.
</div>



    





        
            

    

    
    <h4 class="name" id="getAccessToken"><span class="type-signature"></span>getAccessToken<span class="signature">(state_key, client)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Use the 'accesstoken' service to get an access token from the OP/AS.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>state_key</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The state key (the state parameter in the authorization request)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            

            <td class="description last">A client instance</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line562">line 562</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    An AccessTokenResponse or AuthorizationResponse
</div>



    





        
            

    

    
    <h4 class="name" id="getClient"><span class="type-signature"></span>getClient<span class="signature">(issuer)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Fetch the client based on the issuer,services fetched from the 
config, etc..
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line436">line 436</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Client
</div>



    





        
            

    

    
    <h4 class="name" id="getClientAuthnMethod"><span class="type-signature"></span>getClientAuthnMethod<span class="signature">(client, endpoint)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Return the client authentication method a client wants to use a specific endpoint
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            

            <td class="description last">A client instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>endpoint</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The endpoint at which the client has to authenticate</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line520">line 520</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    The client authentication method
</div>



    





        
            

    

    
    <h4 class="name" id="getResponseType"><span class="type-signature"></span>getResponseType<span class="signature">(client)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Fetches the response type a specific client wants to use
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            

            <td class="description last">A client instance</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line510">line 510</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    The response type
</div>



    





        
            

    

    
    <h4 class="name" id="getSessionInformation"><span class="type-signature"></span>getSessionInformation<span class="signature">(key)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    This is the second of the methods users of this class should know about.
It will return the complete session information as an State instance
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">The session key (state)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line191">line 191</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A state instance
</div>



    





        
            

    

    
    <h4 class="name" id="getUserInfo"><span class="type-signature"></span>getUserInfo<span class="signature">(stateKey, client, accessToken, params)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Use the access token previously acquired to get some user info
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>stateKey</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The state value, this is the key into the session data store</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last">A client instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>accessToken</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">An access token</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object.&lt;string, string></span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Other attributes that might be necessary</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line628">line 628</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    An OpenIdSchema song instance
</div>



    





        
            

    

    
    <h4 class="name" id="initAuthorization"><span class="type-signature"></span>initAuthorization<span class="signature">(client, stateKey, reqArgs)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Constructs the URL that will redirect the user to the authorization
endpoint of the OP/AS.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last">A client instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stateKey</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The key corresponding to a state</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>reqArgs</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object.&lt;string, string></span>


            
            </td>

            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last">Non default request arguments</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line366">line 366</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A dictionary with 2 keys : url - The authorization redirect URL and 
state key - the key to the session information in the state data store.
</div>



    





        
            

    

    
    <h4 class="name" id="initClient"><span class="type-signature"></span>initClient<span class="signature">(issuer)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Initiate a Client instance. Specifically which client class is used is decided by configuration.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">An issuer id</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line200">line 200</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A client instance
</div>



    





        
            

    

    
    <h4 class="name" id="loadProviderInfo"><span class="type-signature"></span>loadProviderInfo<span class="signature">(client, issuer)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    If the providerInfo is statically provided not much has to be done. 
If its expected to be gotten dynamically Provider Info discovery 
has to be performed.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            

            <td class="description last">OIC Client instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Issuer</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line406">line 406</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="loadRegistrationResponse"><span class="type-signature"></span>loadRegistrationResponse<span class="signature">(client)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    If the client has been  statically registered that information must
be provided during the configuration. If expected to be done 
dynamically, this method will do dynamic client registration.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            

            <td class="description last">OIC Client instance</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line224">line 224</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="pickConfig"><span class="type-signature"></span>pickConfig<span class="signature">(issuer)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    From the set of client configurations pick one based on the issuer ID.
Will raise a KeyError if issuer is unknown.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Issuer ID</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line181">line 181</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A client configuration
</div>



    





        
            

    

    
    <h4 class="name" id="refreshAccessToken"><span class="type-signature"></span>refreshAccessToken<span class="signature">(stateKey, client, scope)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Refresh an access token using a refresh token. When asking for a new access token the RP
can ask for another scope for the new token.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>stateKey</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The state key (the state parameter in the authorization request)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>client</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Client.html">Client</a></span>


            
            </td>

            

            
                <td class="default">
                
                    null
                
                </td>
            

            <td class="description last">A client instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last">What the returned token should be valid for.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line599">line 599</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    An AccessTokenResponse instance
</div>



    





        
            

    

    
    <h4 class="name" id="setUp"><span class="type-signature"></span>setUp<span class="signature">(issuer)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Prepare for and do client registration if configured to do or so 
by calling loadRegistration and checks for redirectUris
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>issuer</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The issuer ID.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line502">line 502</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Client instance
</div>



    





        
            

    

    
    <h4 class="name" id="state2Issuer"><span class="type-signature"></span>state2Issuer<span class="signature">(state)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Given the state value find the Issuer ID of the OP/AS that state value
        was used against.
        Will raise a KeyError if the state is unknown.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>state</code></td>
            

            <td class="type">
            
                
<span class="param-type">State</span>


            
            </td>

            

            

            <td class="description last">The state value</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line171">line 171</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    An issuer id
</div>



    





        
            

    

    
    <h4 class="name" id="supportsWebfinger"><span class="type-signature"></span>supportsWebfinger<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    WebFinger is only used when you don't know which OP/AS to talk to until
a user gives you some information you can base a search on.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line155">line 155</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    True if WebFinger is among the services supported.
</div>



    





        
            

    

    
    <h4 class="name" id="userInfoInIdToken"><span class="type-signature"></span>userInfoInIdToken<span class="signature">(idToken)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Given an verified id token return all claims that may been user information
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>idToken</code></td>
            

            <td class="type">
            
                
<span class="param-type">BasicIdToken</span>


            
            </td>

            

            

            <td class="description last">An IDToken instance</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="oidcRp_init.js.html">oidcRp/init.js</a>, <a href="oidcRp_init.js.html#line653">line 653</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    A dictionary with user information
</div>



    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AccessToken.html">AccessToken</a></li><li><a href="AccessTokenResponse.html">AccessTokenResponse</a></li><li><a href="Client.html">Client</a></li><li><a href="HttpRequest.html">HttpRequest</a></li><li><a href="InMemoryStateDataBase.html">InMemoryStateDataBase</a></li><li><a href="RP.html">RP</a></li><li><a href="RPHandler.html">RPHandler</a></li><li><a href="UserInfo.html">UserInfo</a></li><li><a href="UserSchema.html">UserSchema</a></li><li><a href="Util.html">Util</a></li></ul><h3>Global</h3><ul><li><a href="global.html#factory">factory</a></li><li><a href="global.html#getProviderSpecificService">getProviderSpecificService</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed May 02 2018 13:46:06 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>